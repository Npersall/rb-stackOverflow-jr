<!-- Error messages for any error that occurs from this page -->
<%= erb :'_errors'%>

<!-- question -->
<h2><%= @question.title %></h2>
<p>Posted By: <%= @question.author.username %></p>
<h3>Question</h3>

<div class="question_container">
  <table>
    <tr>
      <td class="vote_container">
        <%= erb :'_votes', layout: false, locals: {votable_item: @question} %>
      </td>
      <td class="body_text">
        "<%=@question.body%>"
      </td>
    </tr>
  </table>
  <%= erb :'/_comments', layout: false, locals: {comments: @question.comments } %>
  <br>
  <%= erb :'/_add_comment', layout: false, locals: {commentable_item: @question} %>
</div>

<!-- best answer -->
<% if @question.best_answer %>
  <h3>Best Answer</h3>
  <div class="best_answer_container">
    <table>
      <tr>
        <td class="vote_container">
          <%= erb :'_votes', layout: false, locals: {votable_item: @question.best_answer} %>
        </td>
        <td class="body_text">
          <%= @question.best_answer.body %><br><br>
          Answered By: <%= @question.best_answer.responder.username %>
        </td>
      </tr>
    </table>
    <%= erb :'/_comments', layout: false, locals: {comments: @question.best_answer.comments } %>
    <br>
    <%= erb :'/_add_comment', layout: false, locals: {commentable_item: @question.best_answer} %>
  </div>
<% end %>

<!-- other answers -->
<h3>Other Answers</h3>
<% @question.other_answers.each do |answer| %>
  <div class="answer_container">
    <table>
      <tr>
        <td class="vote_container">
          <%= erb :'_votes', layout: false, locals: {votable_item: answer} %>
        </td>
        <td class="body_text">
          <%=answer.body%><br><br>
          Answered By: <%= answer.responder.username %>
        </td>
        <td>
          <% if session[:id] == @question.author.id %>
            <form action='/answers/<%= answer.id %>' method='POST'>
              <input type="hidden" name="_method" value="PUT">
              <input class="best_answer_button" type="submit" value="Select as Best Answer">
            </form>
          <% end %>
        </td>
      </tr>
    </table>
    <br>

    <%= erb :'/_comments', layout: false, locals: {comments: answer.comments } %>
    <br>
    <%= erb :'/_add_comment', layout: false, locals: {commentable_item: answer} %>
  </div>
<% end %>


<!-- post new answer -->
<h3>Post New Answer</h3>
<form action="/answers" method="post">
  <textarea rows="4" cols="50" name="body"></textarea><br>
  <input type="hidden" name="question_id", value="<%=@question.id %>">
  <input type="submit" value="Post Answer">
</form>

